const express=require('express')
const { getAllUsers,updateUser, deleteUser, getUser, addCourseToUser, removeUserFromCourse, editCredit, addMemberShip } = require('../controllers/user')
const authintication = require('../middlewares/authorization')
const authintications = require('../middlewares/authintication')
const { updateUserValidator, deleteUserValidator, getUserValidator, addCourseToUserValidator, removeUserFromCourseValidator } = require('../utils/validators/uservaalidator')
const { getSingleOrder , getAllOrdersByDay } = require('../controllers/order')
const router = express.Router()
const csrf = require('csurf')
const csrfProtection = csrf({ cookie: true })
router.get('/get-all-users',csrfProtection,authintications,authintication,getAllUsers)
router.get('/get-single-order/:orderId',csrfProtection,authintications,getSingleOrder)
router.get('/get-all-orders',csrfProtection,authintications,authintication,getAllOrdersByDay)
router.post('/edit-credit/:userId',csrfProtection,authintications,authintication,editCredit)
router.put('/update-user/:userId',csrfProtection,authintications,authintication,updateUserValidator,updateUser)
router.put('/add-course-to-user/:userId',csrfProtection,authintications,authintication,addCourseToUserValidator,addCourseToUser)
router.put('/remove-user-from-course/:userId',csrfProtection,authintications,authintication,removeUserFromCourseValidator,removeUserFromCourse)
router.put('/add-member-to-user/:memberId',csrfProtection,authintications,authintication,addMemberShip)
router.delete('/delete-user/:userId',csrfProtection,authintications,authintication,deleteUserValidator,deleteUser)
router.get('/get-user/:userId',csrfProtection,authintications,authintication,getUserValidator,getUser)
module.exports=router